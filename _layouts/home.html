<!DOCTYPE html>
<html>
{% include head.html %}

<body>
  <div>
    <header class="header-background">
      <div class="clearfix border-bottom-thick header-border">
        <ul class="list-reset right py-1 header-text font-smoothing">
          <button class="dark-mode-button mr-2" onclick="toggleDarkMode()">
            <svg height="16" width="16" version="1.1" viewBox="0 0 16 16" >
              <path id="darkmode-icon" d="M15 4a8 8 0 100 8 5 5 0 110-8"/>
            </svg>
          </button>
          {% for my_page in site.pages %}
          {% if my_page.title %}
          <li class="inline-block">
            <a class="link-primary header-link mr-2" href="{{ my_page.url | prepend: site.baseurl }}">
              {{my_page.title }}
            </a>
          </li>
          {% endif %}
          {% endfor %}
        </ul>
      </div>
      <div class="flex container gap-1 mx-auto header-text">
        <section class="grid grid-cols-1 lg:grid-cols-2-1 gap-2 items-center">
          <div class="flex flex-col gap-2">
            <h1 class="h0 header-title">{{ site.title }}</h1>
            <p class="h4 lh-condensed font-smoothing">{{ site.description }}</p>
            <div class="table">
              {% for i in (1..3) %}
              <div class="inline-block mr-1">
                {% include dot-accent.html %}
              </div>
              {% endfor %}
              {% for social in site.socials %}
              <div class="inline-block mr-1">
                {% include {{ social.link }}.html username=social.username %}
              </div>
              {% endfor %}
            </div>
          </div>
          <picture>
            <img src="{{ site.home_image.src }}" alt="{{ site.home_image.alt }}">
          </picture>
        </section>
      </div>
    </header>
    <div class="container mx-auto px-2 py-4">
      {% for post in site.posts %}
      {% include post_block.html %}
      {% endfor %}
    </div>
  </div>
  {% include footer.html %}
</body>
<script>
  const SUN = "M15 4a8 8 0 100 8 8 8 0 000-8";
  const MOON = "M15 4a8 8 0 100 8 5 5 0 110-8";
  const DARKMODE_ICON = document.getElementById("darkmode-icon");

  let darkMode = 
    localStorage.getItem("dark-mode") == "true"
    ?? window.matchMedia("(prefers-color-scheme: dark)").matches;
  
  if (darkMode) {
    document.body.classList.add("dark-mode");
    DARKMODE_ICON.setAttribute("d", SUN);
  }

  function toggleDarkMode() {
    darkMode = !darkMode;
    localStorage.setItem("dark-mode", darkMode);
    document.body.classList.toggle("dark-mode");
    if (darkMode) {
      DARKMODE_ICON.setAttribute("d", SUN);
    } else {
      DARKMODE_ICON.setAttribute("d", MOON);
    }
  }
</script>
</html>