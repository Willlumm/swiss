<header class="border-bottom-thick px-2 clearfix">
  <div class="left sm-width-full py-1 mt-1 mt-lg-0">
    <a class="align-middle link-primary text-accent" href="{{ site.baseurl }}/">
      {{ site.title }}
    </a>
  </div>
  <div class="right sm-width-full">
    <ul class="list-reset mt-lg-1 mb-2 mb-lg-1">
      <button class="dark-mode-button mr-2" onclick="toggleDarkMode()">
        <svg height="16" width="16" version="1.1" viewBox="0 0 16 16" >
          <path id="darkmode-icon" d="M15 4a8 8 0 100 8 5 5 0 110-8"/>
        </svg>
      </button>
      {% for my_page in site.pages %}
        {% if my_page.title %}
        <li class="inline-block">
          <a class="align-middle link-primary mr-2" href="{{ my_page.url | prepend: site.baseurl }}">
            {{ my_page.title }}
          </a>
        </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
</header>
<script>
  const SUN = "M15 4a8 8 0 100 8 8 8 0 000-8";
  const MOON = "M15 4a8 8 0 100 8 5 5 0 110-8";
  const DARKMODE_ICON = document.getElementById("darkmode-icon");

  let darkMode = 
    localStorage.getItem("dark-mode") == "true"
    ?? window.matchMedia("(prefers-color-scheme: dark)").matches;
  
  if (darkMode) {
    document.body.classList.add("dark-mode");
    DARKMODE_ICON.setAttribute("d", SUN);
  }

  function toggleDarkMode() {
    darkMode = !darkMode;
    localStorage.setItem("dark-mode", darkMode);
    document.body.classList.toggle("dark-mode");
    if (darkMode) {
      DARKMODE_ICON.setAttribute("d", SUN);
    } else {
      DARKMODE_ICON.setAttribute("d", MOON);
    }
  }
</script>
